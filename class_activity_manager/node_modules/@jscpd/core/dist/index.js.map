{"version":3,"sources":["/Users/Andrii_Kucherenko/Workspace/lab/jscpd/packages/core/dist/index.js","../src/validators/lines-length-clone.validator.ts","../src/validators/validator.ts","../src/rabin-karp.ts","../src/mode.ts","../src/detector.ts","../src/options.ts","../src/statistic.ts","../src/store/memory.ts"],"names":[],"mappings":"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","file":"/Users/Andrii_Kucherenko/Workspace/lab/jscpd/packages/core/dist/index.js","sourcesContent":[null,"import {IClone, ICloneValidator, IOptions, IValidationResult} from '..';\n\nexport class LinesLengthCloneValidator implements ICloneValidator {\n\n\tvalidate(clone: IClone, options: IOptions): IValidationResult {\n\t\tconst lines = clone.duplicationA.end.line - clone.duplicationA.start.line;\n\t\tconst status = lines >= Number(options?.minLines);\n\n\t\treturn {\n\t\t\tstatus,\n\t\t\tmessage: status ? ['ok'] : [`Lines of code less than limit (${lines} < ${options.minLines})`],\n\t\t};\n\t}\n\n}\n","import {IClone, ICloneValidator, IOptions, IValidationResult} from '..';\n\nexport function runCloneValidators(clone: IClone, options: IOptions, validators: ICloneValidator[]): IValidationResult {\n\treturn validators.reduce((acc: IValidationResult, validator: ICloneValidator): IValidationResult => {\n\t\tconst res = validator.validate(clone, options);\n\t\treturn {\n\t\t\t...acc,\n\t\t\tstatus: res.status && acc.status,\n\t\t\tmessage: res.message ? [...(acc.message as any), ...res.message] : acc.message,\n\t\t};\n\n\t}, {status: true, message: [], clone})\n}\n","import {IClone, ICloneValidator, IMapFrame, IOptions, IStore, ITokenLocation, IValidationResult} from './interfaces';\nimport {runCloneValidators} from './validators';\nimport {ITokensMap} from '.';\nimport EventEmitter from \"eventemitter3\";\n\nexport class RabinKarp {\n  constructor(\n    private readonly options: IOptions,\n    private readonly eventEmitter: EventEmitter,\n    private readonly cloneValidators: ICloneValidator[],\n  ) {\n  }\n\n  public async run(tokenMap: ITokensMap, store: IStore<IMapFrame>): Promise<IClone[]> {\n    return new Promise((resolve => {\n      let mapFrameInStore: any;\n      let clone: IClone | null = null;\n\n      const clones: IClone[] = [];\n\n      // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n      const loop = () => {\n        const iteration = tokenMap.next();\n\n\t\t\t\tstore\n\t\t\t\t\t.get(iteration.value.id)\n\t\t\t\t\t.then(\n\t\t\t\t\t\t(mapFrameFromStore: IMapFrame) => {\n\t\t\t\t\t\t\tmapFrameInStore = mapFrameFromStore;\n\t\t\t\t\t\t\tif (!clone) {\n                clone = RabinKarp.createClone(tokenMap.getFormat(), iteration.value, mapFrameInStore);\n              }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tif (clone && this.validate(clone)) {\n\t\t\t\t\t\t\t\tclones.push(clone);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclone = null;\n\t\t\t\t\t\t\tif (iteration.value.id) {\n\t\t\t\t\t\t\t\treturn store.set(iteration.value.id, iteration.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n          )\n          .finally(() => {\n            if (!iteration.done) {\n              if (clone) {\n                // @ts-ignore\n                clone = RabinKarp.enlargeClone(clone, iteration.value, mapFrameInStore);\n              }\n              loop();\n            } else {\n              resolve(clones);\n            }\n          });\n      }\n      loop();\n    }));\n  }\n\n  private validate(clone: IClone): boolean {\n\n    const validation: IValidationResult = runCloneValidators(clone, this.options, this.cloneValidators);\n\n    if (validation.status) {\n      this.eventEmitter.emit('CLONE_FOUND', {clone})\n    } else {\n      this.eventEmitter.emit('CLONE_SKIPPED', {clone, validation})\n    }\n    return validation.status;\n  }\n\n  private static createClone(format: string, mapFrameA: IMapFrame, mapFrameB: IMapFrame): IClone {\n    return {\n      format,\n      foundDate: new Date().getTime(),\n      duplicationA: {\n        sourceId: mapFrameA.sourceId,\n        start: mapFrameA?.start?.loc?.start as ITokenLocation,\n        end: mapFrameA?.end?.loc?.end as ITokenLocation,\n        range: [mapFrameA.start.range[0], mapFrameA.end.range[1]],\n      },\n      duplicationB: {\n        sourceId: mapFrameB.sourceId,\n        start: mapFrameB?.start?.loc?.start as ITokenLocation,\n        end: mapFrameB?.end?.loc?.end as ITokenLocation,\n        range: [mapFrameB.start.range[0], mapFrameB.end.range[1]],\n      },\n    }\n  }\n\n  private static enlargeClone(clone: IClone, mapFrameA: IMapFrame, mapFrameB: IMapFrame): IClone {\n    clone.duplicationA.range[1] = mapFrameA.end.range[1];\n    clone.duplicationA.end = mapFrameA?.end?.loc?.end as ITokenLocation;\n    clone.duplicationB.range[1] = mapFrameB.end.range[1];\n    clone.duplicationB.end = mapFrameB?.end?.loc?.end as ITokenLocation;\n    return clone;\n  }\n\n}\n\n\n","import {IOptions, IToken} from './interfaces';\n\nexport type IMode = (token: IToken, options?: IOptions) => boolean;\n\nexport function strict(token: IToken): boolean {\n\treturn token.type !== 'ignore';\n}\n\nexport function mild(token: IToken): boolean {\n\treturn strict(token) && token.type !== 'empty' && token.type !== 'new_line';\n}\n\nexport function weak(token: IToken): boolean {\n  return mild(token)\n    && token.format !== 'comment'\n    && token.type !== 'comment'\n    && token.type !== 'block-comment';\n}\n\nconst MODES: { [name: string]: IMode } = {\n\tmild,\n\tstrict,\n\tweak,\n};\n\nexport function getModeByName(name: string): IMode {\n\tif (name in MODES) {\n\t\treturn MODES[name] as IMode;\n\t}\n\tthrow new Error(`Mode ${name} does not supported yet.`);\n}\n\nexport function getModeHandler(mode: string | IMode): IMode {\n\treturn typeof mode === 'string' ? getModeByName(mode) : mode;\n}\n","import {RabinKarp} from './rabin-karp';\nimport {IClone, ICloneValidator, IMapFrame, IOptions, IStore, ITokenizer, ITokensMap} from './interfaces';\nimport {LinesLengthCloneValidator} from './validators';\nimport {mild} from './mode';\nimport EventEmitter from \"eventemitter3\";\n// TODO replace to own event emitter\n\nexport type DetectorEvents = 'CLONE_FOUND' | 'CLONE_SKIPPED' | 'START_DETECTION';\n\nexport class Detector extends EventEmitter<DetectorEvents> {\n\n  private algorithm: RabinKarp;\n\n  constructor(\n    private readonly tokenizer: ITokenizer,\n    private readonly store: IStore<IMapFrame>,\n    private readonly cloneValidators: ICloneValidator[] = [],\n    private readonly options: IOptions) {\n    super();\n    this.initCloneValidators();\n    this.algorithm = new RabinKarp(this.options, this, this.cloneValidators);\n    this.options.minTokens = this.options.minTokens || 50;\n    this.options.maxLines = this.options.maxLines || 500;\n    this.options.minLines = this.options.minLines || 5;\n    this.options.mode = this.options.mode || mild;\n  }\n\n  public async detect(id: string, text: string, format: string): Promise<IClone[]> {\n    const tokenMaps: ITokensMap[] = this.tokenizer.generateMaps(id, text, format, this.options);\n    // TODO change stores implementation\n    this.store.namespace(format);\n\n    // @ts-ignore\n    const detect = async (tokenMap: ITokensMap, clones: IClone[]): Promise<IClone[]> => {\n      if (tokenMap) {\n        this.emit('START_DETECTION', {source: tokenMap});\n        return this.algorithm\n          .run(tokenMap, this.store)\n          .then((clns: IClone[]) => {\n            clones.push(...clns);\n            const nextTokenMap = tokenMaps.pop();\n            if (nextTokenMap) {\n              return detect(nextTokenMap, clones);\n            } else {\n              return clones;\n            }\n          });\n      }\n    }\n    const currentTokensMap = tokenMaps.pop()\n    return currentTokensMap ? detect(currentTokensMap, []) : [];\n  }\n\n  private initCloneValidators(): void {\n    if (this.options.minLines || this.options.maxLines) {\n      this.cloneValidators.push(new LinesLengthCloneValidator())\n    }\n  }\n}\n","import {IOptions, TOption} from './interfaces';\nimport {getModeHandler} from \"./mode\";\n\n\nexport function getDefaultOptions(): IOptions {\n  return {\n    executionId: new Date().toISOString(),\n    path: [process.cwd()],\n    mode: getModeHandler('mild'),\n    minLines: 5,\n    maxLines: 1000,\n    maxSize: '100kb',\n    minTokens: 50,\n    output: './report',\n    reporters: ['console'],\n    ignore: [],\n    threshold: undefined,\n    formatsExts: {},\n    debug: false,\n\t\tsilent: false,\n\t\tblame: false,\n\t\tcache: true,\n\t\tabsolute: false,\n\t\tnoSymlinks: false,\n\t\tskipLocal: false,\n\t\tignoreCase: false,\n\t\tgitignore: false,\n\t\treportersOptions: {},\n    exitCode: 0,\n\t};\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getOption(name: TOption, options?: IOptions): any {\n  const defaultOptions = getDefaultOptions();\n  return options ? options[name] || defaultOptions[name] : defaultOptions[name];\n}\n","// @ts-nocheck\nimport {DetectorEvents, IEventPayload, IHandler, IStatistic, IStatisticRow, ISubscriber} from '.';\n\nexport class Statistic implements ISubscriber {\n\tprivate static getDefaultStatistic(): IStatisticRow {\n\t\treturn {\n      lines: 0,\n      tokens: 0,\n      sources: 0,\n      clones: 0,\n      duplicatedLines: 0,\n      duplicatedTokens: 0,\n      percentage: 0,\n      percentageTokens: 0,\n      newDuplicatedLines: 0,\n      newClones: 0,\n    };\n\t}\n\n\tprivate statistic: IStatistic = {\n\t\tdetectionDate: new Date().toISOString(),\n\t\tformats: {},\n\t\ttotal: Statistic.getDefaultStatistic(),\n\t};\n\n\tpublic subscribe(): Partial<Record<DetectorEvents, IHandler>> {\n    return {\n      CLONE_FOUND: this.cloneFound.bind(this),\n      START_DETECTION: this.matchSource.bind(this),\n    }\n  }\n\n  public getStatistic(): IStatistic {\n    return this.statistic;\n  }\n\n  private cloneFound(payload: IEventPayload): void {\n    const {clone} = payload;\n    const id: string = clone.duplicationA.sourceId;\n    const id2: string = clone.duplicationB.sourceId;\n    const linesCount: number = clone.duplicationA.end.line - clone.duplicationA.start.line;\n    const duplicatedTokens: number = clone.duplicationA.end.position - clone.duplicationA.start.position;\n\n    this.statistic.total.clones++;\n    this.statistic.total.duplicatedLines += linesCount;\n    this.statistic.total.duplicatedTokens += duplicatedTokens;\n    this.statistic.formats[clone.format].total.clones++;\n    this.statistic.formats[clone.format].total.duplicatedLines += linesCount;\n    this.statistic.formats[clone.format].total.duplicatedTokens += duplicatedTokens;\n\n    this.statistic.formats[clone.format].sources[id].clones++;\n    this.statistic.formats[clone.format].sources[id].duplicatedLines += linesCount;\n    this.statistic.formats[clone.format].sources[id].duplicatedTokens += duplicatedTokens;\n\n    this.statistic.formats[clone.format].sources[id2].clones++;\n    this.statistic.formats[clone.format].sources[id2].duplicatedLines += linesCount;\n    this.statistic.formats[clone.format].sources[id2].duplicatedTokens += duplicatedTokens;\n\n    this.updatePercentage(clone.format);\n  }\n\n  private matchSource(payload: IEventPayload): void {\n    const {source} = payload;\n    const format = source.getFormat();\n    if (!(format in this.statistic.formats)) {\n      this.statistic.formats[format] = {\n        sources: {},\n        total: Statistic.getDefaultStatistic(),\n      };\n    }\n    this.statistic.total.sources++;\n    this.statistic.total.lines += source.getLinesCount();\n    this.statistic.total.tokens += source.getTokensCount();\n    this.statistic.formats[format].total.sources++;\n    this.statistic.formats[format].total.lines += source.getLinesCount();\n    this.statistic.formats[format].total.tokens += source.getTokensCount();\n\n    this.statistic.formats[format].sources[source.getId()] =\n      this.statistic.formats[format].sources[source.getId()] || Statistic.getDefaultStatistic();\n\n    this.statistic.formats[format].sources[source.getId()].sources = 1;\n    this.statistic.formats[format].sources[source.getId()].lines += source.getLinesCount();\n    this.statistic.formats[format].sources[source.getId()].tokens += source.getTokensCount();\n    this.updatePercentage(format);\n  }\n\n\tprivate updatePercentage(format: string): void {\n    this.statistic.total.percentage = Statistic.calculatePercentage(\n      this.statistic.total.lines,\n      this.statistic.total.duplicatedLines,\n    );\n    this.statistic.total.percentageTokens = Statistic.calculatePercentage(\n      this.statistic.total.tokens,\n      this.statistic.total.duplicatedTokens,\n    );\n\n    this.statistic.formats[format].total.percentage = Statistic.calculatePercentage(\n      this.statistic.formats[format].total.lines,\n      this.statistic.formats[format].total.duplicatedLines,\n    );\n    this.statistic.formats[format].total.percentageTokens = Statistic.calculatePercentage(\n      this.statistic.formats[format].total.tokens,\n      this.statistic.formats[format].total.duplicatedTokens,\n    );\n\n    Object.entries(this.statistic.formats[format].sources).forEach(([id, stat]) => {\n      this.statistic.formats[format].sources[id].percentage = Statistic.calculatePercentage(\n        stat.lines,\n        stat.duplicatedLines,\n      );\n      this.statistic.formats[format].sources[id].percentageTokens = Statistic.calculatePercentage(\n        stat.tokens,\n        stat.duplicatedTokens,\n      );\n    });\n  }\n\n  private static calculatePercentage(total: number, cloned: number): number {\n    return total ? Math.round((10000 * cloned) / total) / 100 : 0.0;\n  }\n}\n","import {IStore} from '..';\n\nexport class MemoryStore<IMapFrame> implements IStore<IMapFrame> {\n  private _namespace: string = '';\n\n  protected values: Record<string, Record<string, IMapFrame>> = {};\n\n  public namespace(namespace: string): void {\n    this._namespace = namespace;\n    this.values[namespace] = this.values[namespace] || {};\n  }\n\n  public get(key: string): Promise<IMapFrame> {\n    return new Promise((resolve, reject) => {\n      // @ts-ignore\n      if (key in this.values[this._namespace]) {\n        // @ts-ignore\n        resolve(this.values[this._namespace][key]);\n      } else {\n        reject(new Error('not found'));\n      }\n    });\n  }\n\n  public set(key: string, value: IMapFrame): Promise<IMapFrame> {\n    // @ts-ignore\n    this.values[this._namespace][key] = value;\n    return Promise.resolve(value);\n  }\n\n  close(): void {\n    this.values = {};\n  }\n}\n"]}